public class Book extends Media {

    private int stock;
    private Review[] review;
    private int reviewCount;

    public Book(int stock, Review[] review, int reviewCount) {
        this.stock = stock;
        this.review = review;
        this.reviewCount = reviewCount;
    }

    public Book(String title, String auteur, String isbn, double price, int stock, Review[] review, int reviewCount) {
        super(title, auteur, isbn, price);
        this.stock = stock;
        this.review = review;
        this.reviewCount = reviewCount;
    }

    public int getStock() {
        return stock;
    }

    public void setStock(int stock) {
        this.stock = stock;
    }

    public Review[] getReview() {
        return review;
    }

    public void setReview(Review[] review) {
        this.review = review;
    }

    public int getReviewCount() {
        return reviewCount;
    }

    public void setReviewCount(int reviewCount) {
        this.reviewCount = reviewCount;
    }

    public void addReview(Review r) {
        review[reviewCount] = r;
        reviewCount++;
        System.out.println("review added");
    }

    public double getAverageRating() {
        int sum = 0;
        for (int i = 0; i < reviewCount; i++) {
            sum = sum + review[i].getRating(); }

        if (reviewCount == 0) {
            return 0;
        } else {
            return sum / (double) reviewCount;
        }
    }

    public void purchase(User user) {
        if (stock > 0) {
            user.getPurchaseMediaList().add(this);
            stock = stock - 1;
            System.out.println("purchased");
        } else {
            System.out.println("out of stock!");
        }
    }

    public boolean isBestSeller() {
        if (getAverageRating() >= 4.5) {
            return true;
        } else {
            return false;
        }
    }

    public void restock(int quantity) {
        if (quantity > 0) {
            stock = stock+ quantity;
            System.out.println(getTitle() + "Restocked by +" + quantity +
                    "        New stock is: " + stock);
        }
    }

    public String getMediaType() {
        if (isBestSeller()) {
            return "Bestselling Book";
        } else {
            return "Book";
        }
    }

    public String toString() {
        return String.format(
                getMediaType(), getTitle(), getAuteur(), getIsbn(), getPrice(),
                stock, getAverageRating(), reviewCount);
    }
}
